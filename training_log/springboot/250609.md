# ğŸ—“ï¸ 2025.06.09 (ì›”) â€“ êµìœ¡ ì¼ì§€

## ğŸ“š ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©
### Spring Boot

#### íŒŒë¼ë¯¸í„° ë°”ì¸ë”©
- (4) `@ModelAttribute` ì»¤ë§¨ë“œ ê°ì²´
  - ì»¤ë§¨ë“œ ê°ì²´ : í´ë¼ì´ì–¸íŠ¸ê°€ ì „ë‹¬í•´ì£¼ëŠ” íŒŒë¼ë¯¸ ë°ì´í„°ë¥¼ ì£¼ì… ë°›ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê°ì²´
  - ì˜ˆì‹œ
    ```
    @PostMapping("search")
    public String searchMenu(@ModelAttribute("menu") MenuDTO menu) {
        System.out.println(menu);
    
        // menu.getName(), menu.getPrice() ë“± ìë™ ë°”ì¸ë”©
        return "first/searchResult"; // View(searchResult)ì—ì„œ ${menu.name} ë“±ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥
    }
    ```
    - í¼(form)ì´ë‚˜ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ìœ¼ë¡œ ì „ë‹¬ëœ ì—¬ëŸ¬ ê°œì˜ íŒŒë¼ë¯¸í„°ë¥¼ ê°ì²´ë¡œ ìë™ ë°”ì¸ë”© í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜
    - ë™ì‹œì— í•´ë‹¹ ê°ì²´ë¥¼ ëª¨ë¸ì— ìë™ ë“±ë¡í•˜ì—¬ Viewì— ì „ë‹¬ (model.addAttribute() ìƒëµ ê°€ëŠ¥)
      ```
      @ModelAttribute("menu") MenuDTO menu == model.addAttribute("menu", menu)
      ```
    - ë™ì‘ ë°©ì‹ : í´ë˜ìŠ¤ì˜ ê¸°ë³¸ ìƒì„±ìë¥¼ í†µí•´ ê°ì²´ ìƒì„± -> í•„ë“œì— ê°’ ì£¼ì… -> ëª¨ë¸ì— ìë™ ë“±ë¡
    - `@ModelAttribute("menu")`ì™€ ë‹¤ë¥´ê²Œ `@ModelAttribute`ì²˜ëŸ¼ í‚¤ ê°’ì„ ëª…ì‹œí•˜ì§€ ì•Šì€ ê²½ìš° í‚¤ ê°’ì€ í´ë˜ìŠ¤ëª… + ì•ê¸€ì ì†Œë¬¸ì(menuDTO)ê°€ ëœë‹¤.
    - ì´ ì–´ë…¸í…Œì´ì…˜ì€ ìƒëµì´ ê°€ëŠ¥í•˜ì§€ë§Œ ê°€ë…ì„±ê³¼ ëª…í™•ì„± ì¸¡ë©´ì—ì„œ ëª…ì‹œì ìœ¼ë¡œ ì ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.
- (5) HttpSession
  - ì„¸ì…˜ì— ê°’ì„ ì €ì¥í•´ì„œ ì—¬ëŸ¬ ìš”ì²­ ì‚¬ì´ì— ë°ì´í„°ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©. 
  - (5-1) HttpSession ê°ì²´ ì´ìš©í•˜ê¸°
    - ì˜ˆì‹œ
      ```
      @PostMapping("login1")
      public String sessionTest1(HttpSession session, @RequestParam String id) {
          session.setAttribute("id", id);
  
          return "first/loginResult";
      }
      ```
      - HttpSessionì„ ë©”ì„œë“œ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì„œ setAttribute / getAttribute ì‚¬ìš©
      - ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì„¸ì…˜ì„ ì§ì ‘ ì¡°ì‘
      - HttpSession(ì„œë²„ ì„¸ì…˜)ì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ìˆ˜ë™ìœ¼ë¡œ ì €ì¥ ë° ì‚­ì œë¥¼ í•´ì£¼ì–´ì•¼ í•¨
      - ë¡œê·¸ì¸, ì¸ì¦ ë“± ì „ì—­ ìƒíƒœ ìœ ì§€ë¥¼ ìœ„í•´ ì£¼ë¡œ ì‚¬ìš©
    - HttpSession ê°ì²´ ì´ìš© ì‹œ ë¡œê·¸ì•„ì›ƒ 
      ```
      @GetMapping("logout1")
      public String logoutTest1(HttpSession session) {
          session.invalidate();
  
          return "first/loginResult";
      }
      ```
      - ëª…ì‹œì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì„¸ì…˜ì— ì €ì¥í•˜ê³  ì œê±°(invalidate)í•  ìˆ˜ ìˆìŒ
  - (5-2) `@SessionAttributes` ì–´ë…¸í…Œì´ì…˜
    - ì˜ˆì‹œ
      ```
      @PostMapping("login2")
      public String sessionTest2(Model model, @RequestParam String id) {
          model.addAttribute("id", id);
  
          return "first/loginResult";
      }
      ```
      - @Controller í´ë˜ìŠ¤ ìƒë‹¨ì— `@SessionAttributes`ì„ ì–¸
      - Modelì— ì¶”ê°€ëœ íŠ¹ì • key ê°’ì„ ìë™ìœ¼ë¡œ ì„¸ì…˜ì— ì €ì¥
      - ì„¸ì…˜ ì¡°ì‘ ì—†ì´ Spring ë‚´ë¶€ì—ì„œ ìë™ìœ¼ë¡œ ì²˜ë¦¬
      - í¼ ë°ì´í„° ì„ì‹œ ìœ ì§€ ê°™ì€ ì¼ì‹œì  ìƒíƒœ
    - `@SessionAttributes` ì–´ë…¸í…Œì´ì…˜ ì‹œ ë¡œê·¸ì•„ì›ƒ
      ```
      @GetMapping("logout2")
      public String logoutTest2(SessionStatus sessionStatus) {
          sessionStatus.setComplete();
  
          return "first/loginResult";
      }
      ```
      - ì„¸ì…˜ ìƒíƒœ ê´€ë¦¬ëŠ” SessionStatusë¥¼ í†µí•´ ì¢…ë£Œ (`sessionStatus.setComplete()`)
      - **`session.invalidate()`ì„ í†µí•´ì„œëŠ” ì¢…ë£Œí•  ìˆ˜ ì—†ë‹¤.**
- (6) `@RequestBody`
  - ì˜ˆì‹œ
    ```
    @PostMapping("body")
    public void bodyTest(@RequestBody String body,
                         @RequestHeader("content-type") String contentType,
                         @CookieValue(required = false, value = "JSESSIONID") String sessionId) {
        System.out.println("body = " + body);
        System.out.println("contentType = " + contentType);
        System.out.println("sessionId = " + sessionId);
    }
    ```
    - HTTP ìš”ì²­ì˜ body ë¶€ë¶„ì„ Java ê°ì²´ë¡œ ë³€í™˜í•´ì£¼ëŠ” ì–´ë…¸í…Œì´ì…˜ 
    - ì£¼ë¡œ REST APIì—ì„œ JSON ë°ì´í„°ë¥¼ ë°›ì„ ë•Œ ì‚¬ìš©
    - JSON ë°ì´í„°ë¥¼ Java ê°ì²´ë¡œ ë³€í™˜í•  ë•Œ ë‚´ë¶€ì ìœ¼ë¡œ Jackson(ObjectMapper)ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€í™˜
    - í•„ë“œëª…ì´ DTO í´ë˜ìŠ¤, JOSN í‚¤ì™€ ì •í™•íˆ ì¼ì¹˜í•´ì•¼í•œë‹¤.
    - form ì „ì†¡ ë°©ì‹(application/x-www-form-urlencoded)ì—ì„œëŠ” ì‚¬ìš©í•˜ë©´ ì•ˆ ë¨.

#### View Resolver
- Spring MVCì—ì„œ View Resolverê°€ ë™ì‘í•˜ê¸° ìœ„í•œ íë¦„
  ```
  (1) ì‚¬ìš©ì ìš”ì²­ (ë¸Œë¼ìš°ì €) 
  (2) Dispatche Servletì´ í•´ë‹¹ ìš”ì²­ì— ë§¤í•‘ë˜ì–´ ìˆëŠ” handler method ì¡°íšŒ
  (3) Dispatche ServletëŠ” í•´ë‹¹ Handlerì‹¤í–‰í•  ìˆ˜ ìˆëŠ” HandlerAdapterë¥¼ ì°¾ì•„ ì‹¤í–‰
  (4) ì´ HandlerAdapterê°€ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ê³  model ë° viewë¥¼ DispatcherServletì— ë„˜ê¹€
  (5) DispatcherServletì€ ë°˜í™˜ë°›ì€ ë…¼ë¦¬ì  ë·° ì´ë¦„ì„ ViewResolverì—ê²Œ ì „ë‹¬í•˜ê³ , ViewResolverëŠ” ì´ì— í•´ë‹¹í•˜ëŠ” ì‹¤ì œ ë·°(ì˜ˆ: HTML, JSP ë“±)ë¥¼ ì°¾ì•„ì„œ ë°˜í™˜í•¨
  ```
- ì˜ˆì‹œ
  ```
  @GetMapping("string")
  public String stringReturning(Model model) {
      model.addAttribute("forwardMessage", "ë¬¸ìì—´ë¡œ ë·° ì´ë¦„ ë°˜í™˜í•¨...");
      return "result";
  }
  ```
  - (1) ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë…¼ë¦¬ì ì¸ ë·° ì´ë¦„ "result" ë°˜í™˜
  - (2) DispatcherServletì´ ì´ ë·° ì´ë¦„ì„ ViewResolverì—ê²Œ ì „ë‹¬ + model.addAttribute()ë¡œ ì¶”ê°€ëœ ê°’ì€ DispatcherServletì´ Viewì— ìë™ìœ¼ë¡œ ì „ë‹¬
  - (3) ViewResolver (ì˜ˆ: ThymeleafViewResolver)ê°€ ì„¤ì •ëœ ê·œì¹™ì— ë”°ë¼ ë‹¤ìŒ ê²½ë¡œë¡œ ë³€í™˜:
    ```
    resources/templates/result.html
    ```
    - prefix: resources/templates/
    - suffix: .html
  - (4) í•´ë‹¹ ë·° íŒŒì¼ì´ ì¡´ì¬í•˜ë©´ ì‚¬ìš©ìì—ê²Œ HTML ë Œë”ë§ ê²°ê³¼ë¡œ ì‘ë‹µ
- ViewResolver ë‚´ë¶€ ì„¤ì •
  - Spring bootì—ì„œëŠ” ë³„ë„ì˜ ì„¤ì •ì„ í•˜ì§€ ì•Šì•„ë„ ViewResolverì— ì•„ë˜ì™€ ê°™ì´ ë“±ë¡ì´ ë˜ì–´ ìˆë‹¤.
    ```
    spring.thymeleaf.prefix=classpath:/templates/
    spring.thymeleaf.suffix=.html
    ```
- redirect
  - ì ‘ë‘ì‚¬ë¡œ redirect:ì„ í•˜ë©´ forwardê°€ ì•„ë‹Œ redirect ì‹œí‚¨ë‹¤. 
  - ì˜ˆì‹œ
    ```
    @GetMapping("string-redirect")
    public String stringRedirect() {
        return "redirect:/";
    }
    ```
- RedirectAttributes
  - ë¦¬ë‹¤ì´ë ‰íŠ¸(redirect) ì‹œ ë°ì´í„°ë¥¼ ì ê¹ ì €ì¥í•´ì„œ, ë¦¬ë‹¤ì´ë ‰íŠ¸ëœ í˜ì´ì§€ì— í•œ ë²ˆë§Œ ì „ë‹¬í•˜ê³  ì‹¶ì€ ê²½ìš°ì— ì‚¬ìš©
  - ì£¼ë¡œ ì•Œë¦¼ ë©”ì‹œì§€ì— ì‚¬ìš©ëœë‹¤.
  - ì˜ˆì‹œ
    ```
    @GetMapping("string-redirect-attr")
    public String stringRedirectFlashAttribute(RedirectAttributes rttr) {
      rttr.addFlashAttribute("flashMessage1", "ë¦¬ë‹¤ì´ë ‰íŠ¸ attr ì‚¬ìš©í•˜ì—¬ redirect...");
    
      return "redirect:/";
    }
    ```
    - forward ë°©ì‹ê³¼ ê°™ì´ modelì— ê°’ì„ ë„£ê³  ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ë©´ ê°’ì€ ì‚¬ë¼ì§€ê²Œ ëœë‹¤. (ì´ì „ ìš”ì²­ì€ ìœ ì§€ ë˜ì§€ ì•ŠëŠ”ë‹¤.)
    - `redirect:`ëŠ” ìƒˆë¡œìš´ ìš”ì²­(HTTP ì¬ìš”ì²­)ì„ ë°œìƒì‹œí‚¤ê¸° ë•Œë¬¸
    - `addFlashAttribute()`ëŠ” ë¦¬ë‹¤ì´ë ‰íŠ¸ ì´í›„ í•œ ë²ˆë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì„ì‹œ ë°ì´í„°ë¥¼ ì„¸ì…˜ì— ì €ì¥
    - ë¦¬ë‹¤ì´ë ‰íŠ¸ê°€ ì™„ë£Œë˜ë©´ ìë™ìœ¼ë¡œ ì„¸ì…˜ì—ì„œ ì œê±°
    - `/`ë¡œ redirect ëœ í›„ flashMessage1ì€ modelì— ìë™ í¬í•¨
- ModelAndView
  - Modelê³¼ Viewë¥¼ í•©ì³ì„œ ì „ë‹¬í•˜ëŠ” ë°©ì‹
  - í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ í•¸ë“¤ëŸ¬ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ê³  ë°˜í™˜ë°›ì•„ ë¬¸ìì—´ì„ ModelAndViewë¡œ ë§Œë“¤ì–´ dispatcherServletì— ë°˜í™˜í•œë‹¤.
  - ì´ ë•Œ Viewë¥¼ ì „ë‹¬í•  ë•Œ ë¬¸ìì—´ì„ ë°˜í™˜í•´ë„ ë˜ì§€ë§Œ ModelAndViewë¥¼ ë¯¸ë¦¬ ë§Œë“¤ì–´ì„œ ë°˜í™˜í•  ìˆ˜ë„ ìˆë‹¤.
  - ì˜ˆì‹œ
    ```
    @GetMapping("modelandview")
    public ModelAndView modelAndViewReturning(ModelAndView mv) {
        mv.addObject("forwardMessage", "ModelAndViewë¥¼ ì´ìš©í•œ ëª¨ë¸ê³¼ ë·° ë°˜í™˜"); // ëª¨ë¸
        mv.setViewName("result"); // ë·°

        return mv;
    }
    ```

#### @ExceptionHandler
- `@ExceptionHandler` ì–´ë…¸í…Œì´ì…˜
  - `@ExceptionHandler` ì–´ë…¸í…Œì´ì…˜ì€ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ë¥¼ ê°œë³„ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.
  - í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì´ ì„ ì–¸ëœ ë©”ì†Œë“œëŠ” ì§€ì •ëœ ì˜ˆì™¸ê°€ ë°œìƒí–ˆì„ ë•Œ ìë™ìœ¼ë¡œ í˜¸ì¶œë˜ì–´, ì—ëŸ¬ ì‘ë‹µì´ë‚˜ ì˜ˆì™¸ ë©”ì‹œì§€ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
  - í™”ì´íŠ¸ ë¼ë²¨ ì—ëŸ¬ í˜ì´ì§€ì— ëŒ€í•´ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•¨ìœ¼ë¡œì¨ ì‚¬ìš©ì ê²½í—˜ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤. 
  - ì§€ì—­ ìŠ¤ì½”í”„ ë‚´ì— í•´ë‹¹ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë©”ì†Œë“œê°€ ìˆë‹¤ë©´ ì§€ì—­ ìŠ¤ì½”í”„ì— ìˆëŠ” `@ExceptionHandler`ê°€ ì‹¤í–‰ëœë‹¤.
  - ì§€ì—­ ìŠ¤ì½”í”„ëŠ” ê°™ì€ ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ë¶€ì—ì„œ ë°œìƒí•œ ì˜ˆì™¸ì— ëŒ€í•´ì„œë§Œ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ë¥¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œë„ ê³µí†µëœ ì˜ˆì™¸ì²˜ë¦¬ê°€ í•„ìš”í•˜ë‹¤ë©´ `@ControllerAdvice`ì™€ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì „ì—­ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•´ì¤€ë‹¤.
  - try-catch ì—†ì´ ì˜ˆì™¸ ì²˜ë¦¬ êµ¬ì¡°í™” ê°€ëŠ¥
  - ì˜ˆì‹œ
    ```
    @ExceptionHandler(NullPointerException.class)
    public String nullPointerExceptionHandler(NullPointerException exception) {
        System.out.println("controlelr ë ˆë²¨ì˜ exception ì²˜ë¦¬");

        return "error/nullPointer";
    }
    ```
    - `NullPointerException`ì— ëŒ€í•œ ì˜ˆì™¸ ì²˜ë¦¬ ë©”ì†Œë“œ
    - í•´ë‹¹ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ViewResolverë¥¼ í†µí•´ resources/templates/error/nullPointer.htmlì´ ëœë”ë§ ë˜ì–´ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§„ë‹¤.

## ğŸ’» ì‹¤ìŠµ ì˜ˆì‹œ
### Spring Boot
- [íŒŒë¼ë¯¸í„° ë°”ì¸ë”©](../../SPRINGBOOT/chapter02-handler-method)
- [ViewResolver](../../SPRINGBOOT/chapter03-view-resolver)
- [ExceptionHandler](../../SPRINGBOOT/chapter04-exception-handler)
- [íŒ€ ì‹¤ìŠµ ë¬¸ì œ : Spring MVC and Exception Practice](https://github.com/C1Z4/spring-mvc-practice)

## âœï¸ ì˜¤ëŠ˜ì˜ íšŒê³ 
- @ModelAttribute, @RequestBody, HttpSession, RedirectAttributes ë“±ì˜ ì–´ë…¸í…Œì´ì…˜ì´ ì–´ë–¤ ìƒí™©ì—ì„œ ì‚¬ìš©ë˜ëŠ”ì§€ ì •í™•íˆ ì´í•´í•˜ê²Œ ë˜ì—ˆê³ , ê°ê°ì˜ ë™ì‘ ë²”ìœ„ë‚˜ ì²˜ë¦¬ ìœ„ì¹˜ì— ë”°ë¥¸ ì°¨ì´ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆì—ˆë‹¤.
- @ExceptionHandlerë¥¼ ì´ìš©í•œ ì˜ˆì™¸ ì²˜ë¦¬ ë°©ë²•ì„ í•™ìŠµí•˜ë©´ì„œ, ë‹¨ìˆœí•œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ë„˜ì–´ì„œ ì‚¬ìš©ì ê²½í—˜(UX)ì„ ê³ ë ¤í•œ ì˜ˆì™¸ ì‘ë‹µ ì²˜ë¦¬ì˜ ì¤‘ìš”ì„±ì„ ëŠê¼ˆë‹¤.
- í™”ì´íŠ¸ ë¼ë²¨ ì—ëŸ¬ í˜ì´ì§€ë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ê³ , ì˜ˆì™¸ë¥¼ ëª…í™•íˆ ë¶„ë¦¬í•´ì„œ ì²˜ë¦¬í•˜ëŠ” êµ¬ì¡°ëŠ” ì‹¤ì œ í˜„ì—… ì„œë¹„ìŠ¤ì—ì„œë„ ë§¤ìš° ì¤‘ìš”í•˜ê²Œ ë‹¤ë¤„ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ì˜ë¯¸ ìˆì—ˆë‹¤.