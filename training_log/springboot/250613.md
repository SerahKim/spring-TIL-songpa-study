# π—“οΈ 2025.06.13 (κΈ) β€“ κµμ΅ μΌμ§€

## π“ μ¤λ λ°°μ΄ λ‚΄μ©
### Spring Boot
#### hateoas
- hateoasλ€?
  - REST API μ„¤κ³„ μ›μΉ™ μ¤‘ ν•λ‚
  - μ‘λ‹µμ— λ‹¤μ ν–‰λ™μ„ μ„ν• λ§ν¬ ν¬ν•¨
  - μ¦‰, ν„μ¬ μƒνƒμ—μ„ κ°€λ¥ν• ν–‰λ™μ„ μ„λ²„κ°€ λ§ν¬λ΅ μ•λ ¤μ£Όκ³ , ν΄λΌμ΄μ–ΈνΈλ” κ·Έκ±Έ κΈ°λ°μΌλ΅ λ‹¤μ μƒνƒλ΅ μ΄λ™ν•  μ μλ‹¤.
- μμ΅΄μ„± μ¶”κ°€
    ```
    implementation 'org.springframework.boot:spring-boot-starter-hateoas'
    ```
- hateoas μ„¤μ •
    ```
    List<EntityModel<UserDTO>> userWithRel
                = users.stream().map(user -> EntityModel.of(
          user,
          linkTo(methodOn(HateoasTestController.class).findUserByNo(user.getNo())).withSelfRel(),
                linkTo(methodOn(HateoasTestController.class).findAllUsers()).withRel("users"))
        ).collect(Collectors.toList());
    ```
  - `EntityModel<T>`
    - Spring HATEOASμ—μ„ μ‚¬μ©ν•λ” κ°μ²΄
    - κΈ°λ³Έλ°μ΄ν„° + λ§ν¬ μ •λ³΄ : `EntityModel.of(user, ...λ§ν¬λ“¤...)`
    - `user`(UserDTO κ°μ²΄) λ°μ΄ν„° ν•λ‚μ— `self` λ§ν¬, `users`λ§ν¬λ¥Ό ν•¨κ» ν¬ν•¨ν• HATEOAS μ‘λ‹µ κ°μ²΄λ¥Ό λ§λ“¦
  - `linkTo(methodOn(...)).withSelRel()`
    - ν•΄λ‹Ή μ μ € λ¦¬μ†μ¤ μμ²΄μ— μ ‘κ·Όν•λ” λ§ν¬ μƒμ„±
    - `methodOn(HateoasTestController.class)` : HateoasTestController ν΄λμ¤μ— μλ” λ©”μ†λ“μ— μ ‘κ·Ό
    - `findUserByNo(user.getNo())` : HateoasTestController ν΄λμ¤μ λ©”μ†λ“ μ¤‘ μ‚¬μ©μμ μƒμ„Έ μ •λ³΄ μ”μ²­ λ©”μ†λ“μ— μ ‘κ·Ό
    - `withSelfRel()` : self λ§ν¬, ν„μ¬ λ¦¬μ†μ¤λ¥Ό κ°€λ¦¬ν‚¤λ” λ§ν¬λ΅ μ„¤μ •
  - `.withRel("users")`
    - λ¨λ“  μ‚¬μ©μ λ¦¬μ¤νΈλ¥Ό κ°€μ Έμ¤λ” λ©”μ†λ“λ΅ κ°€λ” λ§ν¬
    - κ΄€κ³„ μ΄λ¦„(rel)μ„ usersλ΅ μ„¤μ •
- κ²°κ³Ό
  ```
  {
  "httpStatusCode": 200,
  "message": "μ΅°ν μ„±κ³µ",
  "results": {
    "users": [
      {
        "no": 1,
        "id": "user01",
        "pwd": "pass01",
        "name": "λ‹¤λμ¥",
        "enrollDate": 1749994851033,
        "links": [
          {
            "rel": "self",
            "href": "http://localhost:8080/hateoas/users/1"
          },
          {
            "rel": "users",
            "href": "http://localhost:8080/hateoas/users"
          }
        ]
      },
    ...
  }
  ```
  
#### Swagger
- Swaggerλ€?
  - REST APIλ¥Ό λ¬Έμ„ν™”ν•κ³  ν…μ¤νΈν•  μ μλ” λ„κµ¬
  - ν„μ¬λ” μ΄λ¦„μ΄ λ°”λ€μ–΄μ„ κ³µμ‹μ μΌλ΅λ” OPENAPU Specifiation(OAS)λΌκ³  ν•λ‹¤.
- μ£Όμ” κΈ°λ¥
  - API λ…μ„Έ μ‘μ„±
  - μλ™ λ¬Έμ„ μƒμ„±
  - μ›Ή UIμ—μ„ μ§μ ‘ API μ”μ²­ ν…μ¤νΈ κ°€λ¥
- μμ΅΄μ„± μ¶”κ°€
  ```
  implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.8.3'
  ```
- Swagger μ„¤μ •
  ```
  @Configuration
  @EnableWebMvc
  public class SwaggerConfig {
  
      @Bean
      public OpenAPI openAPI() {
          return new OpenAPI()
                  .components(new Components())
                  .info(swaggerInfo());
      }
  
      private Info swaggerInfo() {
          return new Info()
                  .title("ohgiraffers API")
                  .description("spring boot swagger μ—°λ™ ν…μ¤νΈ")
                  .version("1.0.0");
      }
  }
  ```
- Swagger μ–΄λ…Έν…μ΄μ…
  - API λ¬Έμ„ μ „μ²΄ μ„¤λ… (ν΄λμ¤ / μ»¨νΈλ΅¤λ¬μ— μ‚¬μ©)
    - | μ–΄λ…Έν…μ΄μ…                                     | μ„¤λ…                                                         |
      | ----------------------------------------- | ---------------------------------------------------------- |
      | `@OpenAPIDefinition`                      | μ „μ²΄ API λ¬Έμ„μ κΈ°λ³Έ μ •λ³΄ (title, description, version λ“±)λ¥Ό μ„¤μ •ν•  λ• μ‚¬μ© |
      | `@Tag(name = "νƒκ·Έμ΄λ¦„", description = "μ„¤λ…")` | μ»¨νΈλ΅¤λ¬/λ©”μ„λ“μ— νƒκ·Έλ¥Ό λ¶™μ—¬ κ·Έλ£Ήν™”ν•  λ• μ‚¬μ©                                 |
  - API λ©”μ†λ“ κ΄€λ ¨ (μ”μ²­/μ‘λ‹µ μ„¤λ…)
    - | μ–΄λ…Έν…μ΄μ…                                                    | μ„¤λ…                        |
      | -------------------------------------------------------- | ------------------------- |
      | `@Operation(summary = "μ”μ•½", description = "μƒμ„Έ μ„¤λ…")`      | API μ—”λ“ν¬μΈνΈμ μ„¤λ…μ„ μ‘μ„±         |
      | `@ApiResponse(responseCode = "200", description = "μ„±κ³µ")` | μ‘λ‹µ μƒνƒμ½”λ“ λ° μ„¤λ…              |
      | `@Parameter(description = "νλΌλ―Έν„° μ„¤λ…")`                    | λ©”μ„λ“μ κ°λ³„ νλΌλ―Έν„° μ„¤λ…           |
      | `@RequestBody(description = "μ”μ²­ λ°”λ”” μ„¤λ…")`                 | μ”μ²­ λ³Έλ¬Έ μ„¤λ… (λ³΄ν†µ DTO ν΄λμ¤μ— μ μ©) |
  - DTO ν΄λμ¤μ— μ‚¬μ© (λ°μ΄ν„° λ¨λΈ μ„¤λ…)
    - | μ–΄λ…Έν…μ΄μ…                            | μ„¤λ…                |
      | -------------------------------- | ----------------- |
      | `@Schema(description = "ν•„λ“ μ„¤λ…")` | ν•„λ“λ‚ DTO μμ²΄μ— μ„¤λ… μ¶”κ°€ |

- swagger ui νΈμ¶
  ```
  http://localhost:8080/swagger-ui/index.html
  ```

## π’» μ‹¤μµ μμ‹
### Spring Boot
- [hateoas](../../SPRINGBOOT/chapter09-rest-api/src/main/java/com/restapi/section04)
- [swagger](../../SPRINGBOOT/chapter09-rest-api/src/main/java/com/restapi/section05)

## βοΈ μ¤λμ νκ³ 
- REST APIμ μ„¤κ³„ μ›μΉ™ μ¤‘ ν•λ‚μΈ HATEOASμ™€ REST APIλ¥Ό λ¬Έμ„ν™”ν•  μ μλ” λ„κµ¬μΈ Swaggerμ— λ€ν•΄ λ°°μ› λ‹¤.
- μ²μμ—λ” HATEOASκ°€ λ‹¤μ† μƒμ†ν•κ² λκ»΄μ΅λ”λ°, ν΄λΌμ΄μ–ΈνΈκ°€ λ‹¤μ ν–‰λ™μ„ μ„ νƒν•  μ μλ„λ΅ μ„λ²„κ°€ λ§ν¬λ¥Ό μ κ³µν•΄μ£Όλ” λ°©μ‹μ΄λΌλ” μ„¤λ…μ„ λ“£κ³  μ›Ή νμ΄μ§€μ λ‚΄λΉ„κ²μ΄μ…κ³Ό λΉ„μ·ν•λ‹¤κ³  λκΌλ‹¤. νΉν EntityModelκ³Ό linkTo().withRel()μ„ ν™μ©ν•΄μ„ ν„μ¬ λ¦¬μ†μ¤μ™€ κ΄€λ ¨λ λ§ν¬λ“¤μ„ λ™μ μΌλ΅ μ¶”κ°€ν•λ” λ°©μ‹μ΄ μΈμƒ κΉμ—λ‹¤. λ‹¨μν λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•λ” κ²ƒμ„ λ„μ–΄, μƒνƒ μ „μ΄λ¥Ό μ λ„ν•λ” API μ„¤κ³„κ°€ κ°€λ¥ν•λ‹¤λ” μ μ΄ ν¥λ―Έλ΅μ› λ‹¤.
- Swaggerλ” ν›¨μ”¬ μµμ™ν•κ³  μ‹¤μ©μ μ΄λΌλ” λλ‚μ΄ λ“¤μ—λ‹¤. κΈ°μ΅΄μ—λ” APIλ¥Ό λ¬Έμ„λ΅ λ”°λ΅ μ •λ¦¬ν•κ±°λ‚ PostmanμΌλ΅ ν…μ¤νΈν•κ³¤ ν–λ”λ°, Swaggerλ” API λ…μ„Έ μ‘μ„±λ¶€ν„° ν…μ¤νΈκΉμ§€ ν• λ²μ— μ²λ¦¬ν•  μ μμ–΄ μ‹¤λ¬΄μ—μ„ μ •λ§ λ§μ΄ μ“°μΌ κ²ƒ κ°™μ•λ‹¤. μ–΄λ…Έν…μ΄μ…μ„ ν†µν•΄ κ°„λ‹¨ν•κ² λ¬Έμ„λ¥Ό κµ¬μ„±ν•  μ μλ” κ²ƒλ„ λ§μμ— λ“¤μ—κ³ , νΉν @Operation, @Schema, @ApiResponse κ°™μ€ μ–΄λ…Έν…μ΄μ…λ“¤μ μ“°μ„μƒλ¥Ό μ λ€λ΅ μµν€λ‘λ©΄ μ¶”ν›„ ν”„λ΅μ νΈμ—μ„λ„ μ μ©ν•  κ²ƒ κ°™λ‹¤.